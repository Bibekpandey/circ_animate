<html>
    <head>
        <script type="text/javascript" src="elements.js"></script>
    </head>
    <body>
        <canvas id="tracer" width=1000 height=1000></canvas>
    <body>

    <script>
        var canvas = document.getElementById('tracer');
        var W = canvas.width;
        var H = canvas.height;
        var ctx = canvas.getContext('2d');

        var canvasData = ctx.getImageData(0, 0, W, H);


        var elem= new Circle(50, 50, 50);
        var circle = new Circle(100, 100, 50);
        //var elem1 = new Circle(80, 80, 55);
        //var elem2 = new Circle(50, 50, 55);
        //var elem3 = new Plane(0, 100, 50, 100);
        elem.set_surface(circle);
        elem.velocity = 0.5;
        circle.velocity = 15;

        var elems = [circle, elem];

        var time=0;
        //circle.render(ctx);

        //ctx.arc(100,100,100,2*Math.PI, false);
        //ctx.stroke();

        function renderElements(t) {
            for(var x in elems) {
                elems[x].render(t, ctx);
            }
            for(var x in elems) {
                elems[x].update_position();
            }
        }
        function renderPath() {
            if(time>1)return;
            var curr = circle.curr_position;
            //var pos = elem.get_position(time);
            renderElements(time);
            //ctx.fillRect(pos.x, pos.y, 3, 3);
            setTimeout(renderPath, 100);
            time+=0.01;
        }

        function renderFunc() {
        }

        renderPath();

        function drawPixel (x, y, r, g, b, a) {
            r = r || 0;
            g = g || 0;
            b = b || 0;
            a = a || 255;
            var index = (x + y * W) * 4;

            canvasData.data[index + 0] = r;
            canvasData.data[index + 1] = g;
            canvasData.data[index + 2] = b;
            canvasData.data[index + 3] = a;
        }
        function updateCanvas() {
            ctx.putImageData(canvasData, 0, 0);
        }


        /*
        drawPixel(10,10);
        drawPixel(11,11);
        drawPixel(11,12);
        drawPixel(12,11);
        updateCanvas();
        */
    </script>
</html>
